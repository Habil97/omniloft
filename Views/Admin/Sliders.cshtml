@model List<Verveo.Entities.Slider>
@{
    ViewData["Title"] = "Slider Yönetimi";
}
<div class="container py-5">
    <div class="row mb-3">
        <div class="col-md-6">
            <input type="text" id="sliderSearch" class="form-control" placeholder="Başlık, açıklama veya buton metnine göre ara..." />
        </div>
        <div class="col-md-3">
            <select id="sliderStatusFilter" class="form-select">
                <option value="">Tümü</option>
                <option value="Aktif">Aktif</option>
                <option value="Pasif">Pasif</option>
            </select>
        </div>
    </div>
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Sliderlar</h2>
        <a href="/Admin/AddSlider" class="btn btn-success">Yeni Slider Ekle</a>
    </div>
    <table class="table table-hover table-borderless shadow-sm rounded bg-white">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Başlık</th>
                <th>Açıklama</th>
                <th>Görsel</th>
                <th>Buton</th>
                <th>Durum</th>
                <th>Sıra</th>
                <th>İşlemler</th>
            </tr>
        </thead>
        <tbody id="sliderTableBody">
            @foreach (var slider in Model)
            {
                <tr>
                    <td>@slider.Id</td>
                    <td class="slider-title">@slider.Title</td>
                    <td class="slider-desc">@slider.Description</td>
                    <td>
                        @if (!string.IsNullOrEmpty(slider.ImagePath))
                        {
                            var imageSrc = slider.ImagePath.StartsWith("/images/") ? slider.ImagePath : $"/images/{slider.ImagePath}";
                            <img src="@imageSrc" alt="Slider Görseli" style="max-width:80px;max-height:80px;" />
                        }
                    </td>
                    <td class="slider-btn">@slider.ButtonText</td>
                    <td>
                        @if (slider.IsActive)
                        {
                            <span class="badge bg-success">Aktif</span>
                        }
                        else
                        {
                            <span class="badge bg-secondary">Pasif</span>
                        }
                    </td>
                    <td>@slider.Order</td>
                    <td>
                        <a href="/Admin/EditSlider/@slider.Id" class="btn btn-sm btn-primary me-2">Düzenle</a>
                        <a asp-action="DeleteSlider" asp-route-id="@slider.Id" class="btn btn-danger btn-sm">Sil</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('sliderSearch');
    const statusFilter = document.getElementById('sliderStatusFilter');
    const tableBody = document.getElementById('sliderTableBody');
    searchInput.addEventListener('input', filterSliders);
    statusFilter.addEventListener('change', filterSliders);
    function filterSliders() {
        const search = searchInput.value.toLowerCase();
        const status = statusFilter.value;
        Array.from(tableBody.rows).forEach(row => {
            const title = row.querySelector('.slider-title').textContent.toLowerCase();
            const desc = row.querySelector('.slider-desc').textContent.toLowerCase();
            const btn = row.querySelector('.slider-btn').textContent.toLowerCase();
            const sliderStatus = row.querySelector('.slider-status').textContent;
            const matchesSearch = title.includes(search) || desc.includes(search) || btn.includes(search);
            const matchesStatus = !status || sliderStatus === status;
            row.style.display = (matchesSearch && matchesStatus) ? '' : 'none';
        });
    }
});
</script>
</div>
